<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DUC Entregas</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.png">
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="logo">
            <img src="assets/logo.png" alt="Duclog Logo">
        </div>
    </header>

    <div class="flex-container">
        <div class="container">
            <h2 class="princip">Calculadora de Frete</h2>
            <input type="text" id="destino" class="text" placeholder="Digite o endereÃ§o completo para entrega:">
            <button class="orange-button" onclick="obterDistancia()">
                Calcular Frete
            </button>
            <p id="resultado"></p>
        </div>
    </div>
        <h2 class="vel">Mais Veloz, Mais AcessÃ­vel, <br/> Mais ConfiÃ¡vel! </h2>
        <h2 class="sub">Experimente o novo padrÃ£o em entregas expressas <br/> e economize tempo e dinheiro.</h2>
    <button class="green-button" onclick="enviarWhatsapp()">
        <img src="assets/whatsapp.png" class="whatsapp-icon">
        Fale Conosco
    </button>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBoKr_lrfasZ6AhN14JimI5-f9qVTaQHKQ&libraries=places&language=pt-BR"></script>
    <script>
        function initAutocomplete() {
            const input = document.getElementById('destino');
            const autocomplete = new google.maps.places.Autocomplete(input);
        }

let cost; 

async function obterDistancia() {
    try {
        const destino = document.getElementById('destino').value;
        const response = await fetch('https://d1r3ct0ry.pythonanywhere.com/distance?destinations=' + encodeURIComponent(destino));
        
        if (!response.ok) {
            throw new Error('Erro ao obter distÃ¢ncia.');
        }

        const data = await response.json();
        
        if (data.status === 'OK') {
            const distance = data.rows[0].elements[0].distance.value / 1000; 
            
            if (distance < 15) {
                cost = 20.00; 
            } else {
                cost = distance * 1.4; 
            }

            if (distance <= 15) {
              cost = 20.00; 
            } else if (distance <= 30) {
              cost = distance * 1.45; 
            } else if (distance <= 50) {
                cost = distance * 1.35; 
            } else {
                cost = distance * 1.25; 
            }
            
            document.getElementById('resultado').innerText = `DistÃ¢ncia: ${distance.toFixed(2)} km\nCusto de entrega: R$ ${cost.toFixed(2)}`; // Exibe a distÃƒÂ¢ncia e o custo
        } else {
            throw new Error('Nenhum resultado encontrado.');
        }
    } catch (error) {
        console.error(error);
        document.getElementById('resultado').innerText = 'Erro ao calcular a distância.';
    }
}

function enviarWhatsapp() {
    const destino = document.getElementById('destino').value;
    const mensagem = `OlÃ¡, gostaria de solicitar o frete para o seguinte endereÃ§o: ${destino}, com o seguinte valor sugerido: R$ ${cost.toFixed(2)}`;
    const link = `https://api.whatsapp.com/send?phone=5521970970091&text=${encodeURIComponent(mensagem)}`;
    window.open(link, '_blank');
}
        window.onload = function() {
            initAutocomplete();
        };
    </script>
</body>
</html>
